// src/components/StudentDashboard.tsx
'use client';

import { Search } from 'lucide-react';
import StudentTable from './StudentTable';
import AddStudentButton from './AddStudentButton';
import useStudentStore from '@/store/useStudentStore';
import { NewStudent } from '@/types/student';


export default function StudentDashboard() {
    const { addStudent } = useStudentStore();

  const handleAddStudent = async (studentData: NewStudent) => {
    try {
      await addStudent({

        name: studentData.name,
        cohort: studentData.cohort,
        courses: studentData.courses,
        status: studentData.status,
        dateJoined: new Date().toLocaleDateString('en-US'),
        lastLogin: new Date().toLocaleString('en-US'),
      });
    } catch (error) {
      console.error('Error adding student:', error);
      throw error;
    }
  };

  return (
    <div className="flex h-screen bg-white">
      {/* Sidebar */}
      <div className="w-64 border-r border-gray-200 p-4">
        <div className="mb-8">
        <svg width="120" height="120" viewBox="0 0 597 256" xmlns="http://www.w3.org/2000/svg">
<path d="M282.153 215.673C276.351 215.673 270.828 214.695 265.584 212.74C260.34 210.785 255.988 207.744 252.529 203.617C249.182 199.599 247.397 194.386 247.173 187.978H267.09C267.648 190.802 269.21 192.757 271.776 193.843C274.454 195.037 277.355 195.635 280.48 195.635C282.488 195.635 284.385 195.418 286.17 194.983C288.067 194.657 289.852 194.331 291.526 194.006V214.369C289.852 214.587 288.234 214.858 286.672 215.184C285.222 215.51 283.715 215.673 282.153 215.673ZM254.538 182.928C245.946 182.928 238.359 182.113 231.776 180.484C225.304 178.855 219.837 175.868 215.374 171.524C211.022 167.18 207.73 160.989 205.499 152.953C203.379 144.916 202.319 134.435 202.319 121.511C202.319 108.696 203.435 98.2694 205.666 90.2326C207.898 82.0871 211.189 75.8423 215.541 71.498C219.892 67.1538 225.304 64.1671 231.776 62.538C238.359 60.8003 245.946 59.9315 254.538 59.9315C263.241 59.9315 270.828 60.8003 277.299 62.538C283.883 64.1671 289.35 67.1538 293.702 71.498C298.053 75.8423 301.289 82.0871 303.409 90.2326C305.64 98.2694 306.756 108.696 306.756 121.511C306.756 134.435 305.64 144.916 303.409 152.953C301.289 160.989 297.997 167.18 293.534 171.524C289.183 175.868 283.771 178.855 277.299 180.484C270.828 182.113 263.241 182.928 254.538 182.928ZM254.538 157.677C259.112 157.677 262.906 157.188 265.919 156.211C268.931 155.125 271.274 153.333 272.948 150.835C274.733 148.228 275.961 144.59 276.63 139.92C277.411 135.141 277.802 129.005 277.802 121.511C277.802 113.8 277.411 107.555 276.63 102.777C275.961 97.9979 274.733 94.3596 272.948 91.8617C271.274 89.2551 268.931 87.5174 265.919 86.6486C262.906 85.6711 259.112 85.1824 254.538 85.1824C250.074 85.1824 246.337 85.6711 243.324 86.6486C240.311 87.5174 237.912 89.2551 236.127 91.8617C234.453 94.3596 233.226 97.9979 232.445 102.777C231.664 107.555 231.273 113.8 231.273 121.511C231.273 129.005 231.608 135.141 232.278 139.92C233.059 144.59 234.286 148.228 235.96 150.835C237.745 153.333 240.144 155.125 243.157 156.211C246.169 157.188 249.963 157.677 254.538 157.677Z" fill="black"/>
<path d="M346.941 182.928C339.019 182.928 332.771 180.593 328.196 175.923C323.733 171.144 321.501 164.682 321.501 156.537V94.3053H350.456V147.74C350.456 151.867 351.46 154.636 353.469 156.048C355.477 157.46 358.099 158.166 361.335 158.166C363.567 158.166 366.133 157.623 369.034 156.537C372.046 155.451 374.501 154.093 376.398 152.464V94.3053H405.185V181.95H381.252L376.398 173.316C372.493 175.706 367.974 177.932 362.841 179.995C357.82 181.95 352.52 182.928 346.941 182.928Z" fill="black"/>
<path d="M451.321 220.56L460.526 181.95C454.724 181.95 449.815 180.919 445.798 178.855C441.781 176.792 438.49 173.968 435.923 170.384C433.469 166.691 431.628 162.401 430.4 157.514L415.17 94.3053H445.128L457.179 151.812C457.625 153.441 458.183 154.745 458.853 155.722C459.522 156.699 460.247 157.46 461.028 158.003C461.921 158.437 462.758 158.763 463.539 158.98C464.32 159.089 464.989 159.143 465.547 159.143L479.271 94.3053H508.728L483.958 204.432L475.589 220.56H451.321Z" fill="black"/>
<path d="M548.578 182.439C541.884 182.439 536.305 181.407 531.842 179.344C527.379 177.172 524.087 173.968 521.967 169.732C519.847 165.497 518.787 160.121 518.787 153.604V57.6508H547.742V149.206C547.742 151.921 548.021 154.093 548.578 155.722C549.136 157.351 550.029 158.6 551.256 159.469C552.484 160.229 554.046 160.772 555.943 161.098L561.968 161.913V182.439H548.578Z" fill="black"/>
<path d="M576.247 182.276C573.792 182.276 572.564 181.082 572.564 178.692V160.772C572.564 158.274 573.792 157.025 576.247 157.025H592.983C595.661 157.025 597 158.274 597 160.772V178.692C597 179.995 596.61 180.919 595.828 181.462C595.159 182.005 594.211 182.276 592.983 182.276H576.247Z" fill="black"/>
<path d="M151.937 47.5359C152.573 66.2793 152.042 84.6232 146.965 102.579C140.388 125.846 127.988 145.78 110.356 162.636C98.8546 173.633 85.2357 181.704 70.9405 188.757C61.4761 193.429 52.3701 198.685 43.7672 204.732C31.9478 213.038 22.1372 223.264 14.0738 235.028C9.76227 241.318 5.90567 247.897 1.82766 254.34C1.45327 254.931 0.962137 255.448 0.523338 256C0.350234 255.902 0.17713 255.804 0 255.706C0.998368 253.055 1.92427 250.38 3.00316 247.76C11.912 226.174 22.5921 205.429 34.6893 185.381C49.5642 160.732 66.5042 137.47 85.7711 115.922C100.115 99.881 115.211 84.4704 130.13 68.9228C136.813 61.9596 143.882 55.3528 150.778 48.5894C151.096 48.2761 151.446 47.9824 151.937 47.5359Z" fill="black"/>
<path d="M29.8504 172.814C29.7216 167.75 29.468 162.687 29.4881 157.623C29.5686 140.375 34.0452 124.225 42.6239 109.155C48.5899 98.6748 56.5246 89.6909 65.3207 81.3883C85.5376 62.316 105.734 43.2241 125.976 24.1753C134.212 16.421 142.533 8.74507 150.818 1.03782C151.132 0.744095 151.498 0.501285 152.134 0C152.134 0.838086 152.134 1.33154 152.134 1.82499C152.134 10.3703 152.167 18.9196 152.102 27.4649C152.098 28.2717 151.74 29.2782 151.176 29.846C138.306 42.7815 125.307 55.5996 112.49 68.586C95.2073 86.0879 78.2069 103.852 63.1065 123.218C54.1091 134.76 45.7196 146.716 38.3043 159.299C35.6474 163.811 32.9743 168.314 30.3053 172.822H29.8424L29.8504 172.814Z" fill="#0A0A0A"/>
</svg>

        </div>
        <nav className="space-y-2">
          <a href="#" className="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" className="bi bi-clock" viewBox="0 0 16 16">
            <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71z"/>
            <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0"/>
            </svg>
            <span className="ml-3">Dashboard</span>
          </a>
          <a href="#" className="flex items-center px-4 py-2 bg-gray-100 text-gray-900 rounded-lg">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" className="bi bi-book-half" viewBox="0 0 16 16">
            <path d="M8.5 2.687c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783"/>
            </svg>
            <span className="ml-3">Students</span>
          </a>
          <a href="#" className="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" className="bi bi-journal-bookmark" viewBox="0 0 16 16">
        <path fill="evenodd" d="M6 8V1h1v6.117L8.743 6.07a.5.5 0 0 1 .514 0L11 7.117V1h1v7a.5.5 0 0 1-.757.429L9 7.083 6.757 8.43A.5.5 0 0 1 6 8"/>
        <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2"/>
        <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1z"/>
        </svg>
            <span className="ml-3">Chapter</span>
          </a>
          <a href="#" className="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" className="bi bi-question-circle" viewBox="0 0 16 16">
        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
        <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286m1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94"/>
        </svg>
            <span className="ml-3">Help</span>
          </a>
          <a href="#" className="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" className ="bi bi-pie-chart" viewBox="0 0 16 16">
            <path d="M7.5 1.018a7 7 0 0 0-4.79 11.566L7.5 7.793zm1 0V7.5h6.482A7 7 0 0 0 8.5 1.018M14.982 8.5H8.207l-4.79 4.79A7 7 0 0 0 14.982 8.5M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8"/>
            </svg>
            <span className="ml-3">Reports</span>
          </a>
          <a href="#" className="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" className ="bi bi-gear" viewBox="0 0 16 16">
            <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0"/>
            <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115z"/>
            </svg>
            <span className="ml-3">Settings</span>
          </a>
        </nav>
      </div>


      {/* Main Content */}
      <div className="flex-1">
        {/* Header */}
        <header className="border-b border-gray-200 p-4">
          <div className="flex items-center justify-between">
            <div className="relative">
              <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4" />
              <input
                type="text"
                placeholder="Search your course"
                className="pl-10 pr-4 py-2 border border-gray-300 rounded-lg w-64"
              />
            </div>
            <div className="flex items-center space-x-4">
              <button className="p-2">
                <span className="sr-only">Notifications</span>
                <div className="h-6 w-6 bg-gray-200 rounded-full"></div>
              </button>
              <div className="h-8 w-8 bg-gray-200 rounded-full"></div>
            </div>
          </div>
        </header>

        {/* Content */}
        <main className="p-6">
          <div className="flex items-center justify-between mb-6">
            <div className="flex space-x-4">
              <select className="border border-gray-300 rounded-lg px-3 py-2">
                <option>AY 2024-25</option>
              </select>
              <select className="border border-gray-300 rounded-lg px-3 py-2">
                <option>CBSE 9</option>
              </select>
            </div>
            
            <AddStudentButton onAddStudent={handleAddStudent} />
          </div>

          <StudentTable />
        </main>
      </div>
    </div>
  );
}